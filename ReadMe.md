# Курсовая работа №6 

**СЕРВИС УПРАВЛЕНИЯ ПОЧТОВЫМИ РАССЫЛКАМИ**

Логика работы системы

    После создания новой рассылки, если текущие дата и время больше даты и времени начала и меньше даты и времени окончания, должны быть выбраны из справочника все клиенты, которые указаны в настройках рассылки и запущена отправка для всех этих клиентов.
    Если создается рассылка с временем старта в будущем, отправка должна стартовать автоматически по наступлению этого времени без дополнительных действий со стороны пользователя сервиса.
    По ходу отправки рассылки должна собираться статистика (см. описание сущностей «Рассылка» и «Попытка» выше) по каждой рассылке для последующего формирования отчетов. Попытка создается одна для одной рассылки. Формировать попытки рассылки для всех клиентов отдельно не нужно.
    Внешний сервис, который принимает отправляемые сообщения, может долго обрабатывать запрос, отвечать некорректными данными, на какое-то время вообще не принимать запросы. Нужна корректная обработка подобных ошибок. Проблемы с внешним сервисом не должны влиять на стабильность работы разрабатываемого сервиса рассылок.

**Технологии**

- Python
- Django
- PostgreSQL
- apscheduler
- Redis

**Для работы с проектом необходимо.**  
- Клонировать репозиторий на компьютер используя HTTPS ключ.
- Установить зависимости, указанные в файле requirements.txt, выполнив команду pip3 install.
- В файл .env внесите свои данные (необходимые переменные перечислены в файле .env.sample)
- Cоздайть и применить мигации (python manage.py makemigrations, python manage.py migrate)
- Установить Redis

- Запустить проект по команде python manage.py runserver
- В браузере перейти по адресу: http://127.0.0.1:8000
- После регистрации приложение позволяет составить сообщение, создать рассылку и клиентов - получателей сообщений
- Запуск рассылок можно произвести из пункта меню "Старт!" (для суперюзера. Создать суперюзера можно по команде python manage.py csu) 
или по команде python manage.py send_email

- Также можно осуществлять рассылки по расписанию через планировщик apscheduler. 
Для этого надо выполнить команду python manage.py apscheduler
- Реализована возможность автоматического запуска планировщика при старте приложения (см. модуль services.apps.py)




# Описание задач

#  Разработка сервиса (первая часть)

## Разработайте сервис управления рассылками, администрирования и получения статистики.

1 Реализуйте интерфейс заполнения рассылок, то есть CRUD-механизм для управления рассылками.
2 Реализуйте скрипт рассылки, который работает как из командной строки, так и по расписанию.
3 Добавьте настройки конфигурации для периодического запуска задачи при необходимости.

# Доработка сервиса (вторая часть)
Расширьте модель пользователя для регистрации по почте, а также верификации.
Добавьте интерфейс для входа, регистрации и подтверждения почтового ящика.
Реализуйте ограничение доступа к рассылкам для разных пользователей.
Реализуйте интерфейс менеджера.
Функционал менеджера

    Может просматривать любые рассылки.
    Может просматривать список пользователей сервиса.
    Может блокировать пользователей сервиса.
    Может отключать рассылки.
    Не может редактировать рассылки.
    Не может управлять списком рассылок.
    Не может изменять рассылки и сообщения.

Функционал пользователя

    Нужно следить за тем, чтобы пользователь не мог случайным образом изменить чужую рассылку
    и мог работать только со своим списком клиентов и со своим списком рассылок.

